info:
  summary: Create VM based on home:M0ses:branches:d:k:i/SLES-15-SP7-JeOS
  description: |+
               # Here you can add a description of your KankuFile
               # Please describe its purpose and what it's doing.
               #
               #
               # Enjoy YLWK!
domain_name: hMbdki-sle15-sp7
default_job: tasks
login_user: root
login_pass: kankudai

jobs:
 tasks:
  -
    use_module: Kanku::Handler::SetJobContext
    options:
      host_interface: eth0
  -
    use_module: Kanku::Handler::OBSCheck
    options:
      project: home:M0ses:branches:devel:kanku:images
      package: SLES-15-SP7-JeOS
      repository: images_sle15_sp7
  -
    use_module: Kanku::Handler::ImageDownload
  -
    use_module: Kanku::Handler::CreateDomain
    options:
      memory: 2G
      vcpu: 2
      use_9p: 1
  -
    use_module: Kanku::Handler::PrepareSSH
  # Kanku::Handler::CopyProfile configuration in kanku-config.yml required
  -
    use_module: Kanku::Handler::CopyProfile
  -
    use_module: Kanku::Handler::ExecuteCommandViaSSH
    options:
      commands:
        - echo "Just for testing ssh connection"

job_groups:
  all:
    - tasks

notifiers:
  tasks:
    -
      use_module: Kanku::Notifier::Console
      options:
        template: |+
          [% USE Filter::ANSIColor 'color' %]
          ****
          **** Your text for [% context.ipaddress | color 'red' %] goes here
          ****
      states: succeed

